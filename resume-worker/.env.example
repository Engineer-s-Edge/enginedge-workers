# ============================================================================
# ASSISTANT WORKER - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# ============================================================================

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
PORT=<30xx>
NODE_ENV=development
SERVICE_NAME=<worker-template>

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------

# MongoDB (Memory Persistence)
MONGODB_URI=mongodb://localhost:27017/enginedge-<worker-template>
MONGODB_DB_NAME=<worker-template>
MONGODB_MAX_POOL_SIZE=50
MONGODB_MIN_POOL_SIZE=10
MONGODB_MAX_IDLE_TIME_MS=30000

# ----------------------------------------------------------------------------
# Messaging (Kafka)
# ----------------------------------------------------------------------------
KAFKA_ENABLED=true
# For local single-broker: localhost:9092
# For Docker Compose (Hybrid Dev): localhost:9094
KAFKA_BROKERS=localhost:9094
KAFKA_CLIENT_ID=worker
KAFKA_GROUP_ID=<worker-template>-group

# Optional Kafka Security
# KAFKA_SSL_ENABLED=false
# KAFKA_SASL_MECHANISM=
# KAFKA_SASL_USERNAME=
# KAFKA_SASL_PASSWORD=

# Kafka Topics

# ----------------------------------------------------------------------------
# Caching Configuration
# ----------------------------------------------------------------------------

# Redis (Optional - for production caching)
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# In-Memory Cache
CACHE_ENABLED=true
CACHE_MAX_SIZE=1000
CACHE_TTL=300000

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FILE=./logs/<worker-template>.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=10485760
LOG_FORMAT=json

# ----------------------------------------------------------------------------
# Monitoring & Metrics
# ----------------------------------------------------------------------------

# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30000

# ----------------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------------

# API Authentication
AUTH_ENABLED=false
JWT_SECRET=your_jwt_secret_key_change_this_in_production
JWT_EXPIRATION=86400
API_KEY_HEADER=X-API-Key

# Rate Limiting
RATE_LIMIT_ENABLED=false
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# ----------------------------------------------------------------------------
# Integration with Main Hexagon
# ----------------------------------------------------------------------------

# Main Hexagon (Commander Node)
MAIN_HEXAGON_URL=http://localhost:3000
MAIN_HEXAGON_API_KEY=your_main_hexagon_api_key

# ----------------------------------------------------------------------------
# Kubernetes Settings (for production deployment)
# ----------------------------------------------------------------------------
KUBERNETES_NAMESPACE=default
WORKER_NODE_PREFIX=enginedge-worker
WORKER_BASE_IMAGE=<worker-template>:latest

# ----------------------------------------------------------------------------
# Development & Testing
# ----------------------------------------------------------------------------

# Mock Mode (use mock adapters instead of real services)
MOCK_MODE=false
MOCK_LLM_ENABLED=true
MOCK_LLM_DELAY=1000

# Test Configuration
TEST_TIMEOUT=30000
TEST_MONGODB_URI=mongodb://localhost:27017/assistant-worker-test
TEST_NEO4J_URI=bolt://localhost:7687

# ----------------------------------------------------------------------------
# Performance Tuning
# ----------------------------------------------------------------------------

# Node.js Performance
NODE_OPTIONS=--max-old-space-size=4096
UV_THREADPOOL_SIZE=128

# Connection Pooling
DB_POOL_MIN=10
DB_POOL_MAX=50
DB_IDLE_TIMEOUT=30000

# Request Timeouts
HTTP_TIMEOUT=30000
DB_QUERY_TIMEOUT=10000
LLM_REQUEST_TIMEOUT=60000

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------


# ----------------------------------------------------------------------------
# Notes
# ----------------------------------------------------------------------------
# 1. Replace all "your_*" placeholders with actual values
# 2. For production, use strong passwords and secrets
# 3. Enable authentication and rate limiting in production
# 4. Configure proper MongoDB and Neo4j clusters for production
# 5. Set up Redis for production caching
# 6. Use environment-specific .env files (.env.development, .env.production)
# 7. Never commit .env files to version control
# 8. Use secrets management (e.g., Kubernetes Secrets, AWS Secrets Manager)