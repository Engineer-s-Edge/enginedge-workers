# ============================================================================
# DATA PROCESSING WORKER - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# ============================================================================

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
PORT=3002
NODE_ENV=development
SERVICE_NAME=data-processing-worker

# ----------------------------------------------------------------------------
# Vector Stores Configuration
# ----------------------------------------------------------------------------

# MongoDB Atlas (ENABLED - Primary vector store)
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/enginedge-data?retryWrites=true&w=majority
MONGODB_VECTOR_INDEX=vector_index
MONGODB_TEXT_INDEX=text_index

# Pinecone (DISABLED - Uncomment to enable)
# PINECONE_API_KEY=your-pinecone-api-key
# PINECONE_INDEX=documents

# Weaviate (DISABLED - Uncomment to enable)
# WEAVIATE_URL=http://localhost:8080

# PgVector (DISABLED - Uncomment to enable)
# PGVECTOR_CONNECTION_STRING=postgresql://user:password@localhost:5432/vectordb

# Qdrant (DISABLED - Uncomment to enable)
# QDRANT_URL=http://localhost:6333

# ChromaDB (DISABLED - Uncomment to enable)
# CHROMADB_URL=http://localhost:8000

# ----------------------------------------------------------------------------
# Embeddings Configuration
# ----------------------------------------------------------------------------

# OpenAI Embeddings (ENABLED)
OPENAI_API_KEY=your-openai-api-key
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_DIMENSIONS=1536

# Google AI Embeddings (ENABLED)
GOOGLE_API_KEY=your-google-ai-api-key
GOOGLE_EMBEDDING_MODEL=text-embedding-004

# Cohere (DISABLED - Uncomment to enable)
# COHERE_API_KEY=your-cohere-api-key

# HuggingFace (DISABLED - Uncomment to enable)
# HUGGINGFACE_API_KEY=your-huggingface-api-key

# ----------------------------------------------------------------------------
# Web Scraping & API Keys
# ----------------------------------------------------------------------------

# YouTube API
YOUTUBE_API_KEY=your-youtube-api-key

# Notion API
NOTION_API_KEY=your-notion-integration-token

# Search APIs
SERPAPI_API_KEY=your-serpapi-key
TAVILY_API_KEY=your-tavily-api-key

# GitHub
GITHUB_TOKEN=your-github-personal-access-token

# AWS S3 (Optional)
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=us-east-1

# ----------------------------------------------------------------------------
# Messaging (Kafka)
# ----------------------------------------------------------------------------
KAFKA_ENABLED=true
KAFKA_BROKERS=localhost:9094
KAFKA_CLIENT_ID=data-processing-worker
KAFKA_GROUP_ID=data-processing-group

# Kafka Topics
KAFKA_TOPIC_DOCUMENT_PROCESS=document.process
KAFKA_TOPIC_DOCUMENT_SEARCH=document.search
KAFKA_TOPIC_DOCUMENT_DELETE=document.delete
KAFKA_TOPIC_DOCUMENT_PROCESSED=document.processed
KAFKA_TOPIC_SEARCH_RESULTS=document.search.results
KAFKA_TOPIC_DOCUMENT_DELETED=document.deleted

# ----------------------------------------------------------------------------
# Caching Configuration
# ----------------------------------------------------------------------------

# Redis (Optional - for production caching)
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# In-Memory Cache
CACHE_ENABLED=true
CACHE_MAX_SIZE=1000
CACHE_TTL=300000

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FILE=./logs/<worker-template>.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=10485760
LOG_FORMAT=json

# ----------------------------------------------------------------------------
# Monitoring & Metrics
# ----------------------------------------------------------------------------

# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30000

# ----------------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------------

# API Authentication
AUTH_ENABLED=false
JWT_SECRET=your_jwt_secret_key_change_this_in_production
JWT_EXPIRATION=86400
API_KEY_HEADER=X-API-Key

# Rate Limiting
RATE_LIMIT_ENABLED=false
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# ----------------------------------------------------------------------------
# Integration with Main Hexagon
# ----------------------------------------------------------------------------

# Main Hexagon (Commander Node)
MAIN_HEXAGON_URL=http://localhost:3000
MAIN_HEXAGON_API_KEY=your_main_hexagon_api_key

# ----------------------------------------------------------------------------
# Kubernetes Settings (for production deployment)
# ----------------------------------------------------------------------------
KUBERNETES_NAMESPACE=default
WORKER_NODE_PREFIX=enginedge-worker
WORKER_BASE_IMAGE=<worker-template>:latest

# ----------------------------------------------------------------------------
# Development & Testing
# ----------------------------------------------------------------------------

# Mock Mode (use mock adapters instead of real services)
MOCK_MODE=false
MOCK_LLM_ENABLED=true
MOCK_LLM_DELAY=1000

# Test Configuration
TEST_TIMEOUT=30000
TEST_MONGODB_URI=mongodb://localhost:27017/assistant-worker-test
TEST_NEO4J_URI=bolt://localhost:7687

# ----------------------------------------------------------------------------
# Performance Tuning
# ----------------------------------------------------------------------------

# Node.js Performance
NODE_OPTIONS=--max-old-space-size=4096
UV_THREADPOOL_SIZE=128

# Connection Pooling
DB_POOL_MIN=10
DB_POOL_MAX=50
DB_IDLE_TIMEOUT=30000

# Request Timeouts
HTTP_TIMEOUT=30000
DB_QUERY_TIMEOUT=10000
LLM_REQUEST_TIMEOUT=60000

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------


# ----------------------------------------------------------------------------
# Notes
# ----------------------------------------------------------------------------
# 1. Replace all "your_*" placeholders with actual values
# 2. For production, use strong passwords and secrets
# 3. Enable authentication and rate limiting in production
# 4. Configure proper MongoDB and Neo4j clusters for production
# 5. Set up Redis for production caching
# 6. Use environment-specific .env files (.env.development, .env.production)
# 7. Never commit .env files to version control
# 8. Use secrets management (e.g., Kubernetes Secrets, AWS Secrets Manager)

SERVICE_NAME=data-processing-worker
LOG_LEVEL=info
LOG_ENABLE_CONSOLE=true
LOG_ENABLE_FILES=true
LOG_DIR=logs
