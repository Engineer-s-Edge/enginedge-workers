# ============================================================================
# ASSISTANT WORKER - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# ============================================================================

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
PORT=3001
NODE_ENV=development
SERVICE_NAME=assistant-worker

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------

# MongoDB (Memory Persistence)
MONGODB_URI=mongodb://localhost:27017/enginedge-assistant-worker
MONGODB_DB_NAME=assistant-worker
MONGODB_MAX_POOL_SIZE=50
MONGODB_MIN_POOL_SIZE=10
MONGODB_MAX_IDLE_TIME_MS=30000

# Neo4j (Knowledge Graph)
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_neo4j_password
NEO4J_DATABASE=neo4j
NEO4J_MAX_CONNECTION_POOL_SIZE=50
NEO4J_CONNECTION_TIMEOUT=60000

# ----------------------------------------------------------------------------
# Messaging (Kafka)
# ----------------------------------------------------------------------------
KAFKA_ENABLED=true
# For local single-broker: localhost:9092
# For Docker Compose (Hybrid Dev): localhost:9094
KAFKA_BROKERS=localhost:9094
KAFKA_CLIENT_ID=assistant-worker
KAFKA_GROUP_ID=assistant-worker-group

# Optional Kafka Security
# KAFKA_SSL_ENABLED=false
# KAFKA_SASL_MECHANISM=
# KAFKA_SASL_USERNAME=
# KAFKA_SASL_PASSWORD=

# Kafka Topics
KAFKA_TOPIC_AGENT_EVENTS=agent-events
KAFKA_TOPIC_AGENT_COMMANDS=agent-commands
KAFKA_TOPIC_TOOL_REQUESTS=tool-requests
KAFKA_TOPIC_TOOL_RESPONSES=tool-responses

# ----------------------------------------------------------------------------
# LLM Configuration
# ----------------------------------------------------------------------------

# Default LLM Provider
LLM_DEFAULT_PROVIDER=openai
LLM_DEFAULT_TEMPERATURE=0.7
LLM_DEFAULT_MAX_TOKENS=2000
LLM_REQUEST_TIMEOUT=60000

# OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key
OPENAI_DEFAULT_MODEL=gpt-4o
OPENAI_API_BASE=https://api.openai.com/v1
# OPENAI_ORGANIZATION=your_organization_id

# Anthropic Configuration
ANTHROPIC_API_KEY=your_anthropic_api_key
ANTHROPIC_DEFAULT_MODEL=claude-3-sonnet-20240229
# ANTHROPIC_API_BASE=https://api.anthropic.com

# Groq Configuration
GROQ_API_KEY=your_groq_api_key
GROQ_DEFAULT_MODEL=llama-3-70b-8192
# GROQ_API_BASE=https://api.groq.com

# Gemini Configuration
GEMINI_API_KEY=your_gemini_api_key
GEMINI_DEFAULT_MODEL=gemini-1.5-flash
# GEMINI_API_BASE=https://generativelanguage.googleapis.com

# Deepseek Configuration
DEEPSEEK_API_KEY=your_deepseek_api_key
DEEPSEEK_DEFAULT_MODEL=deepseek-coder
# DEEPSEEK_API_BASE=https://api.deepseek.com

# NVIDIA Configuration
NVIDIA_API_KEY=your_nvidia_api_key
NVIDIA_DEFAULT_MODEL=mixtral-8x7b-instruct
NVIDIA_API_BASE=https://api.nvidia.com/v1

# ----------------------------------------------------------------------------
# Embedding Configuration
# ----------------------------------------------------------------------------

# Embedding Provider (openai, huggingface, local)
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# HuggingFace Configuration (for embeddings)
HUGGINGFACE_API_KEY=your_huggingface_api_key

# Local Embedding Configuration (when EMBEDDING_PROVIDER=local)
LOCAL_EMBEDDING_MODEL=Xenova/all-MiniLM-L6-v2
LOCAL_EMBEDDING_MAX_SEQ_LENGTH=512

# ----------------------------------------------------------------------------
# Vector Store Configuration (for Vector Memory)
# ----------------------------------------------------------------------------
VECTOR_STORE_PROVIDER=mongodb
VECTOR_STORE_CONNECTION_STRING=mongodb://localhost:27017/enginedge-assistant-worker
VECTOR_STORE_DATABASE_NAME=assistant-worker
VECTOR_STORE_COLLECTION_NAME=vectorstore
VECTOR_STORE_INDEX_NAME=vector_index

# ----------------------------------------------------------------------------
# Memory Configuration
# ----------------------------------------------------------------------------

# Memory Provider
MEMORY_PROVIDER=mongodb
MEMORY_CONNECTION_STRING=mongodb://localhost:27017/enginedge-assistant-worker
MEMORY_DATABASE_NAME=assistant-worker
MEMORY_COLLECTION_NAME=conversations

# Memory Limits
MEMORY_MAX_MESSAGES_PER_CONVERSATION=1000
MEMORY_DEFAULT_WINDOW_SIZE=10
MEMORY_SUMMARY_THRESHOLD=20
MEMORY_SUMMARY_MAX_LENGTH=500

# ----------------------------------------------------------------------------
# Agent Configuration
# ----------------------------------------------------------------------------

# Agent Execution Limits
AGENT_MAX_EXECUTION_TIME=300000
AGENT_MAX_ITERATIONS=10
AGENT_DEFAULT_TEMPERATURE=0.7

# ReAct Agent Configuration
REACT_AGENT_MAX_ITERATIONS=10
REACT_AGENT_EARLY_STOP_THRESHOLD=0.9

# Graph Agent Configuration
GRAPH_AGENT_MAX_NODES=100
GRAPH_AGENT_MAX_EXECUTION_TIME=600000

# Expert Agent Configuration
EXPERT_AGENT_MAX_SOURCES=15
EXPERT_AGENT_RESEARCH_DEPTH=medium

# ----------------------------------------------------------------------------
# Checkpointing Configuration
# ----------------------------------------------------------------------------
CHECKPOINT_ENABLED=true
CHECKPOINT_MAX_PER_AGENT=10
CHECKPOINT_CLEANUP_INTERVAL=3600000
CHECKPOINT_STORAGE_PATH=./checkpoints

# ----------------------------------------------------------------------------
# Human-in-the-Loop (HITL) Configuration
# ----------------------------------------------------------------------------
HITL_ENABLED=true
HITL_DEFAULT_TIMEOUT=300000
HITL_MAX_PENDING_REQUESTS=100

# ----------------------------------------------------------------------------
# Streaming Configuration
# ----------------------------------------------------------------------------

# Server-Sent Events (SSE)
SSE_ENABLED=true
SSE_HEARTBEAT_INTERVAL=30000
SSE_MAX_CONNECTIONS=1000

# WebSocket
WEBSOCKET_ENABLED=true
WEBSOCKET_PORT=3002
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_HEARTBEAT_INTERVAL=30000

# ----------------------------------------------------------------------------
# Caching Configuration
# ----------------------------------------------------------------------------

# Redis (Optional - for production caching)
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# In-Memory Cache
CACHE_ENABLED=true
CACHE_MAX_SIZE=1000
CACHE_TTL=300000

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FILE=./logs/assistant-worker.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=10485760
LOG_FORMAT=json

# ----------------------------------------------------------------------------
# Monitoring & Metrics
# ----------------------------------------------------------------------------

# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30000

# ----------------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------------

# API Authentication
AUTH_ENABLED=false
JWT_SECRET=your_jwt_secret_key_change_this_in_production
JWT_EXPIRATION=86400
API_KEY_HEADER=X-API-Key

# Rate Limiting
RATE_LIMIT_ENABLED=false
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# ----------------------------------------------------------------------------
# Integration with Main Hexagon
# ----------------------------------------------------------------------------

# Main Hexagon (Commander Node)
MAIN_HEXAGON_URL=http://localhost:3000
MAIN_HEXAGON_API_KEY=your_main_hexagon_api_key

# Agent Tool Worker
AGENT_TOOL_WORKER_URL=http://localhost:3003
AGENT_TOOL_WORKER_ENABLED=true

# ----------------------------------------------------------------------------
# Kubernetes Settings (for production deployment)
# ----------------------------------------------------------------------------
KUBERNETES_NAMESPACE=default
WORKER_NODE_PREFIX=enginedge-worker
WORKER_BASE_IMAGE=assistant-worker:latest

# ----------------------------------------------------------------------------
# External Services (Optional - for advanced features)
# ----------------------------------------------------------------------------

# Google Calendar API (for scheduling features)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=http://localhost:3001/api/google-calendar/auth/callback
GOOGLE_REFRESH_TOKEN=your_google_refresh_token
# GOOGLE_CREDENTIALS_PATH=path/to/credentials.json

# Wolfram Alpha API (for mathematical computations)
WOLFRAM_API_KEY=your_wolfram_alpha_api_key
WOLFRAM_DEFAULT_FORMAT=plaintext
WOLFRAM_TIMEOUT=10000

# Tavily API (for web search)
TAVILY_API_KEY=your_tavily_api_key

# VirusTotal API (for security analysis)
VIRUSTOTAL_API_KEY=your_virustotal_api_key

# Todoist API (for task management)
TODOIST_TOKEN=your_todoist_token

# Notion API (for knowledge management)
NOTION_TOKEN=your_notion_token

# Kroki (for diagram generation)
KROKI_URL=https://kroki.io

# ----------------------------------------------------------------------------
# Development & Testing
# ----------------------------------------------------------------------------

# Mock Mode (use mock adapters instead of real services)
MOCK_MODE=false
MOCK_LLM_ENABLED=true
MOCK_LLM_DELAY=1000

# Test Configuration
TEST_TIMEOUT=30000
TEST_MONGODB_URI=mongodb://localhost:27017/assistant-worker-test
TEST_NEO4J_URI=bolt://localhost:7687

# ----------------------------------------------------------------------------
# Performance Tuning
# ----------------------------------------------------------------------------

# Node.js Performance
NODE_OPTIONS=--max-old-space-size=4096
UV_THREADPOOL_SIZE=128

# Connection Pooling
DB_POOL_MIN=10
DB_POOL_MAX=50
DB_IDLE_TIMEOUT=30000

# Request Timeouts
HTTP_TIMEOUT=30000
DB_QUERY_TIMEOUT=10000
LLM_REQUEST_TIMEOUT=60000

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------

# Enable/Disable Features
FEATURE_STREAMING=true
FEATURE_CHECKPOINTING=true
FEATURE_HITL=true
FEATURE_KNOWLEDGE_GRAPH=true
FEATURE_VECTOR_MEMORY=true
FEATURE_METRICS=true

# ----------------------------------------------------------------------------
# Notes
# ----------------------------------------------------------------------------
# 1. Replace all "your_*" placeholders with actual values
# 2. For production, use strong passwords and secrets
# 3. Enable authentication and rate limiting in production
# 4. Configure proper MongoDB and Neo4j clusters for production
# 5. Set up Redis for production caching
# 6. Use environment-specific .env files (.env.development, .env.production)
# 7. Never commit .env files to version control
# 8. Use secrets management (e.g., Kubernetes Secrets, AWS Secrets Manager)

SERVICE_NAME=assistant-worker
LOG_LEVEL=info
LOG_ENABLE_CONSOLE=true
LOG_ENABLE_FILES=true
LOG_DIR=logs


DATA_PROCESSING_WORKER_URL=http://localhost:3003
SPACY_SERVICE_URL=http://localhost:8001
